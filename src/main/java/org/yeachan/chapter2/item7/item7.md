# 다 쓴 객체 참조를 해제하라
가비지 컬렉션이 메모리 관리를 다 할거라고 생각하지 마라.

배열에서 값을 빼 왔다고 해도 메모리는 줄어들지 않는다.(그야 필요없는 객체에 대한 래퍼런스를 잃은게 아니니까...)

즉, 메모리를 아직 잡아먹고있다.
쓰고있는건 아니지만 할당 해제를 한게 아니니까


그럼 어떻게 하라고?

다 쓴 참조를 해제하면 된다.

하지만 참조를 매번 null 처리 하는것은 바람직하지 않다.

가장 좋은 방법은 래퍼런스를 가리키는 변수를 특정 범위 안에서만 사용하는 것이다.(로컬변수는 영역 밖에서는 정리되니까..)


그럼 언제 래퍼런스를 null로 지정해야할까?
- 메모리를 직접 관리할 때

캐시를 사용할때도 메모리 누수를 조심해야 한다.

캐시의 키에대한 래퍼런스가 캐시 밖에서 필요 없어지면 엔트리를 자동으로 비워주는 WeakHashMap을 쓸 수 있다.(hard reference가 아니면 가비지컬랙션이 처리해준다나 뭐라나..)

또는 특정 시간이 지나면 캐시값이 의미가 없어지는 경우에 백그라운드 스레드를 사용하거나 새로운 엔트리를 추가할 때 부가적인 작업으로 기존 캐시를 비우는 일을 할것이다.


콜백도 마찬가지

콜백을 모아두는 Map도 WeakHashMap을 쓴다.